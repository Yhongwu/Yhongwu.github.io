---
title: 继承和组合的区别
categories: "java基础"
tags: 
	- 继承
	- 组合
	- java
grammar_cjkRuby: true
---


### 什么是继承
继承是面向对象三大基本特征之一(继承，封装，多态)，继承就是子类继承父类的特征和行为，使得子类对象（实例）具有父类的实例域和方法，或子类从父类继承方法，使得子类具有父类相同的行为。在java中通过关键字extends实现继承，java中所有类默认都是java.lang.Object的子类。继承强调的是is-a关系。
直接通过例子来了解继承：

``` java
/**
 * 动物
 */
public class Animal {
    public void breathing() {
        System.out.println("呼气...吸气...");
    }
}
```

``` java
/**
 * 飞行动物
 * 继承
 */
public class FlyingAnimals extends Animal{
    public void filying() {
        System.out.println("飞行...");
    }

    public static void main(String[] args) {
        FlyingAnimals flyingAnimals = new FlyingAnimals();
        flyingAnimals.breathing();
        flyingAnimals.filying();
    }
}
```
运行结果：

> 呼气...吸气...
>飞行...

继承是代码复用的一种方式。在继承中，父类的方法内部实现细节对子类可见，是‘白盒式’的代码复用。

### 什么是组合
组合是通过对现有对象进行拼装即组合产生新的具有更复杂的功能。如：

``` java
/**
 * 动物
 */
public class Animal {
    public void breathing() {
        System.out.println("呼气...吸气...");
    }
}
```


``` java
/**
 * 爬行动物
 * 组合
 */
public class Reptilia {

    private Animal animal;

    public Reptilia(Animal animal) {
        this.animal = animal;
    }

    public void crawling() {
        System.out.println("爬行...");
    }
    public void breathing() {
        animal.breathing();
    }


    public static void main(String[] args) {
        Animal animal = new Animal();
        Reptilia reptilia = new Reptilia(animal);
        reptilia.breathing();;
        reptilia.crawling();
    }
}
```
运行结果：
>呼气...吸气...
>爬行...

组合体现的是整体和部分，强调的是has-a的关系。所以组合更多的用于下面这样的场景：

``` java
/**
 * 轮胎
 */
class Tire {
    public void run() {
        System.out.println("轮胎转动...");
    }
}
/**
 * 车灯
 */
class Light {
    public void light() {
        System.out.println("灯亮...");
    }
}
```

``` java
/**
 * 交通工具
 * 组合
 */
public class Vehicle {
    private Tire tire;
    private Light light;

    public Vehicle(Tire tire,Light light) {
        this.tire = tire;
        this.light = light;
    }

    public void operation() {
        light.light();
        tire.run();
    }

    public static void main(String[] args) {
        Tire tire = new Tire();
        Light light = new Light();
        Vehicle vehicle = new Vehicle(tire,light);
        vehicle.operation();
    }
}
```
运行结果：
>灯亮...
>轮胎转动...

### 继承与组合的区别与联系
继承与组合都是面向对象中代码复用的方式。父类的内部细节对子类可见，其代码属于白盒式的复用，而组合中，对象之间的内部细节不可见，其代码属于黑盒式复用。继承在编码过程中就要指定具体的父类，其关系在编译期就确定，而组合的关系一般在运行时确定。继承强调的是is-a的关系，而组合强调的是has-a的关系。
### 继承与组合的优缺点
#### 继承的优缺点
##### 优点：
* 支持扩展，通过继承父类实现，但会使系统结构较复杂
* 易于修改被复用的代码
##### 缺点：
* 代码白盒复用，父类的实现细节暴露给子类，破坏了封装性
* 当父类的实现代码修改时，可能使得子类也不得不修改，增加维护难度。
* 子类缺乏独立性，依赖于父类，耦合度较高
* 不支持动态拓展，在编译期就决定了父类
#### 组合的优缺点
##### 优点：
* 代码黑盒复用，被包括的对象内部实现细节对外不可见，封装性好。
* 整体类与局部类之间松耦合，相互独立。
* 支持扩展
* 每个类只专注于一项任务
* 支持动态扩展，可在运行时根据具体对象选择不同类型的组合对象(扩展性比继承好)
##### 缺点：
* 创建整体类对象时，需要创建所有局部类对象。导致系统对象很多。

### 什么情况下使用继承，什么情况下使用组合
从前面的分析看，组合的优点明显多于继承，再加上java中仅支持单继承，所以：
除非两个类之间是is-a的关系，否则尽量使用组合。

